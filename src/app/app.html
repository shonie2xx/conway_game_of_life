<div class="container">
  <header>
    <h1>Game of Life</h1>
  </header>

  <main class="grid-container">
    <div
      class="grid"
      [style.--grid-cols]="gridCols"
      [style.--grid-rows]="gridRows"
      [style.--grid-aspect-ratio]="gridCols / gridRows"
    >
      @for (row of grid(); track $index; let i = $index) { @for (cell of row; track $index; let j =
      $index) {
      <div class="cell" [class.alive]="cell"></div>
      } }
    </div>
  </main>

  <footer class="controls">
    <button (click)="toggleStartStop()">{{ isRunning() ? 'Pause' : 'Play' }}</button>
    <button (click)="reset()">Reset</button>
    <button (click)="openPatternsModal()">Patterns</button>

    <div class="publish-section">
      <input
        type="text"
        placeholder="Pattern name..."
        [value]="patternName()"
        (input)="patternName.set($any($event.target).value)"
        class="pattern-name-input"
      />
      <button (click)="publish()" [disabled]="!patternName().trim()">Publish</button>
    </div>
  </footer>

  <app-patterns
    [isOpen]="showPatternsModal()"
    (patternSelected)="loadPattern($event)"
    (modalClosed)="closePatternsModal()"
  >
  </app-patterns>
</div>
